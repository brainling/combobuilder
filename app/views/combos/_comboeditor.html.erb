<div class="hide" data-bind="css: { hide: !browserSupported() }">
  <label for="inputScheme">Input Scheme</label>
  <select id="inputScheme"
        data-bind="options: inputSchemes, optionsText: 'title', value: selectedInputScheme">
  </select>
  <label for="comboText">Combo (text)</label>
  <input id="comboText" type="text" data-bind="value: comboText, valueUpdate: 'afterkeydown'"/>

  <div class="well combo-well">
    <div>
      <input type="text" data-bind="value: comboLink" readonly="true"/>
    </div>
    <div data-bind="html: combo"></div>
  </div>
  <div class="alert alert-error hide" data-bind="html: errorMessage, css: { hide: !hasError() }"></div>
</div>

<% content_for :scripts do %>
    <%= javascript_include_tag('combobuilder') %>
    <script type="text/javascript">
        <% cache do %>
        <% moves = Dir.glob('app/assets/images/moves/*.png') %>
        window.comboAssets = {
            <% moves.each do |m| %>
            <% file = File.basename(m, '.*') %>
            '<%= file %>': '<%= image_tag 'moves/' + file + '.png' %>',
            <% end %>
        };
        <% end %>

        window.comboBuilder = window.comboBuilder || {};
        window.comboBuilder.inputSchemes = [
            <% input_schemes.each do |key, value| %>
            { name: '<%= key %>', title: '<%= value.title %>' },
            <% end %>
        ];

        window.comboBuilder.parsedComboUrl = '<%= (parsed_combo_url(:id => '$'))[0..-2] %>';
        window.comboBuilder.comboUrl = '<%= (combo_url(:id => '$'))[0..-2] %>';

        $(function () {
            ko.applyBindings(new ComboBuilderViewModel());
        });
    </script>
<% end %>